{"apps":{"http":{"http_port":80,"https_port":443,"servers":{"srv0":{"listen":[":443"],"logs":{"logger_names":{"*.iitmall.com":"log1"}},"routes":[{"handle":[{"handler":"subroute","routes":[{"handle":[{"defaults":["default","pwa"],"destinations":["{store_code}","{store_path}"],"handler":"map","mappings":[{"input_regexp":"((\\w+)\\.)?(\\w+)\\.iitmall\\.com$","outputs":["${2}","${3}"]}],"source":"{http.request.host}"},{"MAGE_ROOT":"/data/websites/www","handler":"vars"},{"handler":"vars","root":"{http.vars.MAGE_ROOT}/{store_path}/pub"}]},{"handle":[{"handler":"headers","response":{"set":{"X-Frame-Options":["SAMEORIGIN"]}}}],"match":[{"path":["/static"]}]},{"handle":[{"handler":"headers","response":{"set":{"X-Frame-Options":["SAMEORIGIN"]}}}],"match":[{"path":["/media"]}]},{"handle":[{"handler":"headers","response":{"set":{"X-Content-Type-Options":["nosniff"]}}}],"match":[{"path":["/"]}]},{"handle":[{"handler":"static_response","headers":{"Location":["{http.request.orig_uri.path}/"]},"status_code":308}],"match":[{"file":{"try_files":["{http.request.uri.path}/index.php"]},"not":[{"path":["*/"]}]}]},{"handle":[{"encodings":{"gzip":{}},"handler":"encode","prefer":["gzip"]}]},{"group":"group13","handle":[{"handler":"subroute","routes":[{"group":"group10","handle":[{"handler":"rewrite","uri":"/static/{http.regexp.reg_static.2}"}],"match":[{"file":{"try_files":["/static/{http.regexp.reg_static.2}"]}}]},{"group":"group10","handle":[{"handler":"rewrite","uri":"/static.php?resource={http.regexp.reg_static.2}"}],"match":[{"not":[{"file":{"try_files":["/static/{http.regexp.reg_static.2}"]}}]}]}]}],"match":[{"path_regexp":{"name":"reg_static","pattern":"^/static/(version\\d*/)?(.*)$"}}]},{"group":"group13","handle":[{"handler":"subroute","routes":[{"group":"group11","handle":[{"handler":"rewrite","uri":"{http.matchers.file.relative}"}]}]}],"match":[{"file":{"split_path":[".php"],"try_files":["{http.request.uri.path}","{http.request.uri.path}/index.php","index.php"]}}]},{"group":"group13","handle":[{"handler":"subroute","routes":[{"handle":[{"body":"{http.request.uri} not allowed","handler":"static_response"}]}]}],"match":[{"not":[{"path_regexp":{"pattern":"^/index\\.php$"}},{"path":["*/"]}]}]},{"handle":[{"handler":"static_response","status_code":403}],"match":[{"path":["/media/customer/*","/media/downloadable/*","/media/import/*","/media/custom_options/*","/errors/*"]}]},{"handle":[{"handler":"static_response","status_code":404}],"match":[{"path_regexp":{"name":"reg_notfound","pattern":"\\/\\..*$|\\/errors\\/.*\\.xml$|theme_customization\\/.*\\.xml"}}]},{"handle":[{"handler":"reverse_proxy","transport":{"dial_timeout":10000000000,"env":{"MAGE_RUN_CODE":"{store_code}","MAGE_RUN_TYPE":"store"},"protocol":"fastcgi","split_path":[".php"]},"upstreams":[{"dial":"unix//dev/shm/php/www-data/php8.socket"},{"dial":"unix//dev/shm/php/www-data/php8-mail.socket"}]}],"match":[{"path":["*.php"]}]},{"handle":[{"handler":"file_server","hide":["/etc/caddy/Caddyfile","/data/web/caddy/magento.conf"],"index_names":["index.php","index.html"]}]}]}],"match":[{"host":["*.iitmall.com"]}],"terminal":true}]},"srv1":{"errors":{"routes":[{"handle":[{"handler":"subroute","routes":[{"group":"group6","handle":[{"handler":"rewrite","uri":"/_status.502.html"}]}]}],"match":[{"host":["admin.uqixi.com"]}],"terminal":true}]},"listen":[":80"],"logs":{"logger_names":{"*.iitmall.com":"log0"},"skip_hosts":["admin.uqixi.com"]},"routes":[{"handle":[{"handler":"subroute","routes":[{"handle":[{"handler":"vars","root":"/data/websites/vmail"}]},{"group":"group16","handle":[{"handler":"rewrite","uri":"/qhandler.php?action={http.regexp.qh.1}\u0026hash={http.regexp.qh.2}"}],"match":[{"path_regexp":{"name":"qh","pattern":"^/qhandler/(.*)/(.*)"}}]},{"group":"group15","handle":[{"handler":"subroute","routes":[{"group":"group0","handle":[{"handler":"rewrite","uri":"/resource.php?file={http.regexp.c_m.1};"}],"match":[{"path_regexp":{"name":"c_m","pattern":"^/cache/(.*)$"}}]}]}],"match":[{"path":["/cache/*"]}]},{"group":"group15","handle":[{"handler":"subroute","routes":[{"group":"group1","handle":[{"handler":"rewrite","uri":"/edit.php?{http.regexp.edit.1}={http.regexp.edit.2}"}],"match":[{"path_regexp":{"name":"edit","pattern":"^/edit/(.*)/(.*)"}}]}]}],"match":[{"path":["/edit/*"]}]},{"group":"group15","handle":[{"handler":"subroute","routes":[{"group":"group2","handle":[{"handler":"rewrite","uri":"/auth"}],"match":[{"path":["/rspamd/auth"]}]},{"handle":[{"handler":"reverse_proxy","upstreams":[{"dial":"rspamd:11334"}]}]}]}],"match":[{"path_regexp":{"pattern":"^/rspamd/?(.*)$"}}]},{"group":"group15","handle":[{"handler":"subroute","routes":[{"group":"group3","handle":[{"handler":"rewrite","uri":"json_api.php?query={http.regexp.api_uri.1}\u0026{http.request.uri.query}"}]}]}],"match":[{"path_regexp":{"name":"api_uri","pattern":"^/api/v1/(.*)$"}}]},{"group":"group15","handle":[{"handler":"subroute","routes":[{"handle":[{"abort":true,"handler":"static_response"}]}]}],"match":[{"path_regexp":{"pattern":"^/.well-known/acme-challenge/"}}]},{"group":"group15","handle":[{"handler":"subroute","routes":[{"group":"group5","handle":[{"handler":"rewrite","uri":"{http.matchers.file.relative}"}]}]}],"match":[{"file":{"split_path":[".php"],"try_files":["{http.request.uri.path}","{http.request.uri.path}/index.php","{http.request.uri.path}.php"]}}]},{"handle":[{"handler":"reverse_proxy","transport":{"dial_timeout":10000000000,"protocol":"fastcgi","root":"/data/websites/vmail","split_path":[".php"]},"upstreams":[{"dial":"unix//dev/shm/php/www-data/php8.socket"},{"dial":"unix//dev/shm/php/www-data/php8-mail.socket"}]}],"match":[{"path":["*.php"]}]},{"handle":[{"handler":"file_server","hide":["/data/web/caddy/vmail/web.conf"],"index_names":["index.php","index.html"]}]}]}],"match":[{"host":["admin.uqixi.com"]}],"terminal":true},{"handle":[{"handler":"subroute","routes":[{"handle":[{"defaults":["default","pwa"],"destinations":["{store_code}","{store_path}"],"handler":"map","mappings":[{"input_regexp":"((\\w+)\\.)?(\\w+)\\.iitmall\\.com$","outputs":["${2}","${3}"]}],"source":"{http.request.host}"},{"MAGE_ROOT":"/data/websites/www","handler":"vars"},{"handler":"vars","root":"{http.vars.MAGE_ROOT}/{store_path}/pub"}]},{"handle":[{"handler":"headers","response":{"set":{"X-Frame-Options":["SAMEORIGIN"]}}}],"match":[{"path":["/static"]}]},{"handle":[{"handler":"headers","response":{"set":{"X-Frame-Options":["SAMEORIGIN"]}}}],"match":[{"path":["/media"]}]},{"handle":[{"handler":"headers","response":{"set":{"X-Content-Type-Options":["nosniff"]}}}],"match":[{"path":["/"]}]},{"handle":[{"handler":"static_response","headers":{"Location":["{http.request.orig_uri.path}/"]},"status_code":308}],"match":[{"file":{"try_files":["{http.request.uri.path}/index.php"]},"not":[{"path":["*/"]}]}]},{"handle":[{"encodings":{"gzip":{}},"handler":"encode","prefer":["gzip"]}]},{"group":"group17","handle":[{"handler":"subroute","routes":[{"group":"group7","handle":[{"handler":"rewrite","uri":"/static/{http.regexp.reg_static.2}"}],"match":[{"file":{"try_files":["/static/{http.regexp.reg_static.2}"]}}]},{"group":"group7","handle":[{"handler":"rewrite","uri":"/static.php?resource={http.regexp.reg_static.2}"}],"match":[{"not":[{"file":{"try_files":["/static/{http.regexp.reg_static.2}"]}}]}]}]}],"match":[{"path_regexp":{"name":"reg_static","pattern":"^/static/(version\\d*/)?(.*)$"}}]},{"group":"group17","handle":[{"handler":"subroute","routes":[{"group":"group8","handle":[{"handler":"rewrite","uri":"{http.matchers.file.relative}"}]}]}],"match":[{"file":{"split_path":[".php"],"try_files":["{http.request.uri.path}","{http.request.uri.path}/index.php","index.php"]}}]},{"group":"group17","handle":[{"handler":"subroute","routes":[{"handle":[{"body":"{http.request.uri} not allowed","handler":"static_response"}]}]}],"match":[{"not":[{"path_regexp":{"pattern":"^/index\\.php$"}},{"path":["*/"]}]}]},{"handle":[{"handler":"static_response","status_code":403}],"match":[{"path":["/media/customer/*","/media/downloadable/*","/media/import/*","/media/custom_options/*","/errors/*"]}]},{"handle":[{"handler":"static_response","status_code":404}],"match":[{"path_regexp":{"name":"reg_notfound","pattern":"\\/\\..*$|\\/errors\\/.*\\.xml$|theme_customization\\/.*\\.xml"}}]},{"handle":[{"handler":"reverse_proxy","transport":{"dial_timeout":10000000000,"env":{"MAGE_RUN_CODE":"{store_code}","MAGE_RUN_TYPE":"store"},"protocol":"fastcgi","split_path":[".php"]},"upstreams":[{"dial":"unix//dev/shm/php/www-data/php8.socket"},{"dial":"unix//dev/shm/php/www-data/php8-mail.socket"}]}],"match":[{"path":["*.php"]}]},{"handle":[{"handler":"file_server","hide":["/data/web/caddy/magento.conf","/etc/caddy/Caddyfile"],"index_names":["index.php","index.html"]}]}]}],"match":[{"host":["*.iitmall.com"]}],"terminal":true}]}}},"pki":{"certificate_authorities":{"local":{"name":"Wolf Websites","root":{"certificate":"/data/web/caddy/ssl/cert.pem","private_key":"/data/web/caddy/ssl/key.pem"}}}},"tls":{"automation":{"policies":[{"issuers":[{"challenges":{"dns":{"override_domain":"_acme.1377878.com","propagation_delay":5000000000,"provider":{"access_key_id":"AQQKBINCWK55XM8Y20L2","access_key_secret":"BUdpejoO9yipfDcZ3t9dEefZkVYE3rAygQpo1eoD","name":"huaweidns"},"resolvers":["223.5.5.5","1.1.1.1"]}},"email":"wolf.tan@jicjoy.com","module":"acme"},{"challenges":{"dns":{"override_domain":"_acme.1377878.com","propagation_delay":5000000000,"provider":{"access_key_id":"AQQKBINCWK55XM8Y20L2","access_key_secret":"BUdpejoO9yipfDcZ3t9dEefZkVYE3rAygQpo1eoD","name":"huaweidns"},"resolvers":["223.5.5.5","1.1.1.1"]}},"email":"wolf.tan@jicjoy.com","module":"zerossl"}],"subjects":["*.iitmall.com"]}]}}},"logging":{"logs":{"default":{"exclude":["http.log.access.log1","http.log.access.log0"],"level":"DEBUG","writer":{"filename":"/data/web/config/log/access.log","output":"file"}},"log0":{"include":["http.log.access.log0"],"level":"DEBUG","writer":{"filename":"/var/log/caddy.log","output":"file"}},"log1":{"include":["http.log.access.log1"],"level":"DEBUG","writer":{"filename":"/var/log/caddy.log","output":"file"}}}}}